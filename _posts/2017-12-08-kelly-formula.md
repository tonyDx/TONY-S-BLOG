---
layout: post
title:  "久赌必输的数学原理：“凯利公式”"
date:   2017-10-28 20:45:13 -0400
background: '/img/article/kellyFormula.png'
published : true
---

###### 本文节选自《人类最美的54个公式》 ######



> 赌徒迷信的是运气 <br/> 赌场相信的是数学

赌王何鸿燊接手葡京赌场时，业务蒸蒸日上，但理性的赌王仍然忐忑，请教“赌神”叶汉：“如果这些赌客总是输，长此以往，他们不来了怎么办？”叶汉笑道：**“一次赌徒，一世赌徒，他们担心的是赌场不在怎么办。”**

叶汉说的只是心理层面，现代赌场程序方面的设计，比叶汉当年要缜密得多，赌场集中了概率、级数、极限方面的数学经验。一个普通赌徒，只要长久赌下去，最终一定会血本无归，所谓的各种致胜绝技，除了电影里的周星星，现实里的周星驰都不信。

**赌徒永远不明白，与自己对赌的不是运气，也不是庄家，他们是在与狄利克雷、伯努利、高斯、纳什、凯利这样的大师对决数学**，赢的胜率能有多大？



# 01
> 看得到的是概率 <br/>
看不见的是陷阱



我们先说一个最简单的赌博游戏：赌运气猜硬币。

规则是这样的，**掷硬币，正面赢反面输，赢了可以拿走一倍的钱，输了会赔掉本金，你玩不玩？**你可能觉得，唉，这游戏不错，公平！恰好运气也不错，第一把赢了100元！你高兴坏了，这时候庄家跟你说，你看你也赢了这么多，我呢，辛辛苦苦搭个场子，最后什么都没捞着，要不这样，你赢了，就给我留下2％，就算是救济救济老哥，给捧捧场！你一听，2％，才这么点，拿去吧，不差钱！好了，这事就这么定下来了。

**然而你做梦都想不到的是：就是这小小的2％，最后却让你输得倾家荡产、家破人亡。**

**这小小的2个点的赢的概率貌似不起眼，但配上“大数法则”，就成为了赌场赚钱的利器！**“大数法则”是数学家伯努利提出来的，说的是假设n(a)是n次独立重复实验中发生a的次数，p是每次实验发生a的概率，当n足够大的时候，对任意正数ε，有```lim{[|(n(a)/n)| p]<ε}=1，```公式这么复杂，99%的赌徒都看不懂，看不懂没关系，我们只看结果，最终庄家赢到的钱=0.02*a。

**庄家赚的钱最终只跟玩家下注大小有关！**这也就是我们常说的“流水”，只要玩家不停地玩，庄家就会不停地赚！而不管玩家是输是赢，庄家始终是赢的！为什么赌场有“最小投注额”，因为扩大“流水”才能将利润最大化！

**所以别以为自己有多聪明，你要庆幸自己玩得不够久而已，十赌九输正源于此。**




#02

> 只要进了赌场 <br/>
你就是一个穷鬼



**我们再进一步，就算双方的概率均等，你仍然是一个输家，**这里涉及到“无限财富”和“赌徒输光定律”，这个定理在现实生活中有许多应用，如“姓氏消亡”“线粒体夏娃假说”，**在概率均等的情况下，谁的资本大，谁的赢率高。**

你和我对赌，你我各有5块钱，输光为止。那么你赢的概率是50%，输的概率也是50%。

你和我对赌，你有5块钱，我有10块钱，输光为止，那么你赢的概率就只有33.3%，而输的概率有66.7%（这里涉及到高斯的概率论和泰勒的级数论），后面隐藏的就是赌场大BOSS凯利公式，后面小节里将详加表述。

对于小散户，赌场一般可以认为财富是无限多的，你赢不垮它，它却能吃了你。**在赌场老板的眼里，世界只有两种人：一种现在是穷鬼，一种未来是穷鬼。**

**“无限财富定律”也解释了赌场设置最大投注额原因。**不是老板好心保护赌徒免遭破产，只是老板为了保护自己设置的安全屏障，想象下万一哪天比尔盖茨去赌场找乐子，一次性砸个几百亿进去，那赌场老板真的要哭了，虽然这种事情不太可能发生，但也不能不防，**所以赌场根据自己的财富能力设计最高投注额，也就是为了抵抗“无限财富定理”！**







#03

> 赌场大BOSS凯利公式：先告诉你怎么下注



**凯利公式在高级赌徒的世界里大名鼎鼎**，那什么是凯利公式，我们先看一个例子：

有一个简单2赔1的赌局，扔硬币下注，硬币为正面则得2元，如果为反面则输掉1元，你的总资产为100元，每一次的押注都可投入任意金额。

你会怎么赌呢？

如果你是冒险主义者，你可能会想，要玩就玩票大的，一次性把100元全压上，幸运的话，一次正面就可以获得200元，又是一段值得炫耀的赌史；可是，如果输了得把100元资产拱手献给对方，你就一无所有，好不容易来趟拉斯维加斯，这肯定不是明策。

如果你是保守主义者，你可以会想，谨慎点，百分之一慢慢来。你每次只下注1元，正面赢2元，反面输1元。玩了20把突然觉得，对方下注10元一次就赢得20元，自己一次才赢2元、10次才能赢得20元，后悔已经错过几个亿！

100太多1块太少，该投入多少比例下注？普通赌徒看似无解，但凯利公式告诉你答案是25%！

让我们来看看凯利公式的庐山真面目：

```
f* =（bp-q）/ b
在公式中，各参数意义为：
f* = 应投注的资本比值
p = 获胜的概率（也就是抛硬币正面的概率）
q = 失败的概率，即1 - p（也就是硬币反面的概率）
b = 赔率，等于期望盈利 ÷可能亏损（也就是盈亏比）
```

公式上面的分子bp-q代表“赢面”，数学中叫“期望值”。

**什么才是不多不少的合适赌注呢？凯利告诉我们要通过选择最佳投注比例，才能长期获得最高盈利。**回到前面提到的例子中，硬币抛出正反面的概率都是50%，所以p、q获胜失败的概率都为0.5，而赔率＝期望盈利÷可能亏损=2元盈利÷1元亏损，赔率就是2，我们要求的答案是f，也就是(bp - q) ÷ b = (2 * 50% - 50%) ÷ 2 = 25%。

拿出资金的25%来进行下注，才能使赌局收益最大化。

**赌场操盘者的每一次下注的时候，都会谨记数学原则，而作为普通赌徒，除了心中默念“菩萨保佑”外，哪里知道这后面的数理知识。**

所以，**就算你赢得了财神爷的支持，但你也永远赢不了“凯利公式”。**


# 04

> 除了100%赢 <br/>
任何时候都不应下注



**所有的赌场游戏，几乎都是对赌徒不公平的游戏。**

但这种不公平并非是庄家出老千，**现代赌场光明正大地依靠数学规则赚取利润，从某种意义上来讲，赌场是最透明公开的场所**，如果不是这样，进出赌场不知有多少狂命之徒，何鸿燊早怕九条命都不够。

凯利公式不是凭空设想出来的，这个数学模型已经在华尔街得到验证，**除了在赌场被奉为正神，也被称为“资金管理神器”，是比尔格罗斯等投资大佬的心头之爱**，巴菲特依靠这个公式也赚了不少银子。回归到赌场讨论这个公式，根据f = (bp-q) / b公式结论，期望值(bp-q)为负时，赌徒不具备任何优势，也不应下任何赌注。这种赌博游戏，要下负赌注，也就是说你不如自己开个赌场当庄家。

的确，**世界上有为数不多的“赌神”，他们当中有信息论的发明者香农，数学家爱德华·索普，路径理论的创始人蒙特卡罗等**，他们通过一系列复杂的计算和艰深的数学理论，把某些赌戏的赢率扳回到50％以上，例如21点靠强大的心算能力可以把概率拉上去。但就凭你读书时上课打瞌睡输了只知道倍投翻本的可怜知识，以及九九乘法表的那点算力，还是先老实读完以下3条准则。

1. 期望值（bp-q）为0时，赌局为公平游戏，这时不应下任何赌注。
2. 期望值（bp-q）为负时，赌徒不具备任何优势，也不应下任何赌注。
3. 期望值（bp-q）为正时，这时按照凯利公式投注赚钱最快，风险最小。

**其实最终结论只有一个：除了100%赢，任何时候都不应下全部赌注，即使赢的概率高达99.9%。**


# 结语


### 赢得胜利的唯一法则：不赌###


没有谁能说服一个堕落的赌徒，因为这是人格的缺陷。   
**但如果你还是一个具有理性精神的人，别再迷恋所谓的运气。**   
赌徒能够依靠的是祖宗保佑，而赌场后面的大佬是高斯、凯利、伯努利这样的大神。   

你怎么可能赢得了庄家？

论理性，没有人能比赌场老板更理性。   
论数学，没有人能比赌场老板请的专家更精通数学。   
论赌本，没有人能比赌场老板的本钱更多。   

如果你想真正赢得这场赌局，法则只有一个：不赌。
